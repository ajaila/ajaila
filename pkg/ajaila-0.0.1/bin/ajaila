#!/usr/bin/env ruby
require 'rubygems'
require 'gli'
include GLI::App

class Colors
   COLOR1 = "\e[1;36;40m"
   COLOR2 = "\e[1;35;40m"
   NOCOLOR = "\e[0m"
   RED = "\e[1;31;40m"
   GREEN = "\e[1;32;40m"
   DARKGREEN = "\e[0;32;40m"
   YELLOW = "\e[1;33;40m"
   DARKCYAN = "\e[0;36;40m"
end

class String
   def color(color)
      return color + self + Colors::NOCOLOR
   end
end

# generating new application
command :new do |c|
  c.action do |global_options,options,args|
    app_name = args.first
#    puts Dir.getwd 
    raise TypeError, 'Ajaila: you should enter the name for your app!'.color(Colors::RED) if app_name == nil
    puts "Ajaila: generating new application \"#{app_name}\"".color(Colors::GREEN)

    app_root = Dir::pwd + "/" + app_name

    begin
      Dir::mkdir(app_root)
      puts "\tcreated application root"
     rescue
      raise TypeError, "Ajaila: try another name, \"#{app_name}\" folder already exists!".color(Colors::RED)
    end

    Dir::mkdir("#{app_root}/assets")
    puts "\tprepared Assets"
    Dir::mkdir("#{app_root}/config")
    puts "\tprepared Config"
    Dir::mkdir("#{app_root}/datasets")
    puts "\tprepared Datasets directory"
    Dir::mkdir("#{app_root}/datasets/raw")
    puts "\tprepared Raw folder in the Datasets directory"
    Dir::mkdir("#{app_root}/sandbox")
    puts "\tprepared Sandbox directory"
    Dir::mkdir("#{app_root}/sandbox/miners")
    puts "\tprepared Miners folder in the Sandbox directory"
    Dir::mkdir("#{app_root}/sandbox/presenters")
    puts "\tprepared Presenters folder in the Sandbox directory"
    Dir::mkdir("#{app_root}/sandbox/tables")
    puts "\tprepared Tables folder in the Sandbox directory"

  end
end


exit run(ARGV)
